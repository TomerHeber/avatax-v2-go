// Code generated by go-swagger; DO NOT EDIT.

package models

// This file was generated by the swagger tool.
// Editing this file might prove futile when you re-run the swagger generate command

import (
	"context"
	"strconv"

	"github.com/go-openapi/errors"
	"github.com/go-openapi/strfmt"
	"github.com/go-openapi/swag"
	"github.com/go-openapi/validate"
)

// EcmsDetailModel Represents an ECMS record, used internally by AvaTax to track information about exemptions.
// Example: {"country":"US","endDate":"2021-12-25T00:00:00+00:00","exemptCertDetailId":1235,"exemptCertId":1111,"idType":"TIN","isTaxCodeListExclusionList":0,"region":"WA","stateFips":"AAA"}
//
// swagger:model EcmsDetailModel
type EcmsDetailModel struct {

	// Name or ISO 3166 code identifying the country.
	//
	// This field supports many different country identifiers:
	//  * Two character ISO 3166 codes
	//  * Three character ISO 3166 codes
	//  * Fully spelled out names of the country in ISO supported languages
	//  * Common alternative spellings for many countries
	//
	// For a full list of all supported codes and names, please see the Definitions API `ListCountries`.
	// Example: US
	// Required: true
	Country *string `json:"country"`

	// End date of this exempt certificate
	// Example: 2021-12-25T00:00:00+00:00
	// Format: date-time
	EndDate strfmt.DateTime `json:"endDate,omitempty"`

	// Unique, system-assigned identifier of a ExemptCertDetail record.
	// Example: 1235
	// Required: true
	ExemptCertDetailID *int32 `json:"exemptCertDetailId"`

	// The calc_id associated with a certificate in CertCapture.
	// Example: 1111
	// Required: true
	ExemptCertID *int32 `json:"exemptCertId"`

	// The customer Tax Id Number (tax_number) associated with a certificate. This is same as exemptionNo in Transactions.
	// Max Length: 100
	// Min Length: 0
	IDNo *string `json:"idNo,omitempty"`

	// The type of idNo (tax_number) associated with a certificate.
	// Example: Driver's Licence Number, Permit Number.
	// Example: TIN
	// Max Length: 50
	// Min Length: 0
	IDType *string `json:"idType,omitempty"`

	// Is the tax code list an exculsion list?
	// Example: 0
	IsTaxCodeListExclusionList int32 `json:"isTaxCodeListExclusionList,omitempty"`

	// Name or ISO 3166 code identifying the region within the country.
	//
	// This field supports many different region identifiers:
	//  * Two and three character ISO 3166 region codes
	//  * Fully spelled out names of the region in ISO supported languages
	//  * Common alternative spellings for many regions
	//
	// For a full list of all supported codes and names, please see the Definitions API `ListRegions`.
	// Example: WA
	// Required: true
	Region *string `json:"region"`

	// State FIPS
	// Example: AAA
	// Required: true
	// Max Length: 2
	// Min Length: 0
	StateFips *string `json:"stateFips"`

	// optional: list of tax code associated with this exempt certificate detail
	TaxCodes []*EcmsDetailTaxCodeModel `json:"taxCodes"`
}

// Validate validates this ecms detail model
func (m *EcmsDetailModel) Validate(formats strfmt.Registry) error {
	var res []error

	if err := m.validateCountry(formats); err != nil {
		res = append(res, err)
	}

	if err := m.validateEndDate(formats); err != nil {
		res = append(res, err)
	}

	if err := m.validateExemptCertDetailID(formats); err != nil {
		res = append(res, err)
	}

	if err := m.validateExemptCertID(formats); err != nil {
		res = append(res, err)
	}

	if err := m.validateIDNo(formats); err != nil {
		res = append(res, err)
	}

	if err := m.validateIDType(formats); err != nil {
		res = append(res, err)
	}

	if err := m.validateRegion(formats); err != nil {
		res = append(res, err)
	}

	if err := m.validateStateFips(formats); err != nil {
		res = append(res, err)
	}

	if err := m.validateTaxCodes(formats); err != nil {
		res = append(res, err)
	}

	if len(res) > 0 {
		return errors.CompositeValidationError(res...)
	}
	return nil
}

func (m *EcmsDetailModel) validateCountry(formats strfmt.Registry) error {

	if err := validate.Required("country", "body", m.Country); err != nil {
		return err
	}

	return nil
}

func (m *EcmsDetailModel) validateEndDate(formats strfmt.Registry) error {
	if swag.IsZero(m.EndDate) { // not required
		return nil
	}

	if err := validate.FormatOf("endDate", "body", "date-time", m.EndDate.String(), formats); err != nil {
		return err
	}

	return nil
}

func (m *EcmsDetailModel) validateExemptCertDetailID(formats strfmt.Registry) error {

	if err := validate.Required("exemptCertDetailId", "body", m.ExemptCertDetailID); err != nil {
		return err
	}

	return nil
}

func (m *EcmsDetailModel) validateExemptCertID(formats strfmt.Registry) error {

	if err := validate.Required("exemptCertId", "body", m.ExemptCertID); err != nil {
		return err
	}

	return nil
}

func (m *EcmsDetailModel) validateIDNo(formats strfmt.Registry) error {
	if swag.IsZero(m.IDNo) { // not required
		return nil
	}

	if err := validate.MinLength("idNo", "body", *m.IDNo, 0); err != nil {
		return err
	}

	if err := validate.MaxLength("idNo", "body", *m.IDNo, 100); err != nil {
		return err
	}

	return nil
}

func (m *EcmsDetailModel) validateIDType(formats strfmt.Registry) error {
	if swag.IsZero(m.IDType) { // not required
		return nil
	}

	if err := validate.MinLength("idType", "body", *m.IDType, 0); err != nil {
		return err
	}

	if err := validate.MaxLength("idType", "body", *m.IDType, 50); err != nil {
		return err
	}

	return nil
}

func (m *EcmsDetailModel) validateRegion(formats strfmt.Registry) error {

	if err := validate.Required("region", "body", m.Region); err != nil {
		return err
	}

	return nil
}

func (m *EcmsDetailModel) validateStateFips(formats strfmt.Registry) error {

	if err := validate.Required("stateFips", "body", m.StateFips); err != nil {
		return err
	}

	if err := validate.MinLength("stateFips", "body", *m.StateFips, 0); err != nil {
		return err
	}

	if err := validate.MaxLength("stateFips", "body", *m.StateFips, 2); err != nil {
		return err
	}

	return nil
}

func (m *EcmsDetailModel) validateTaxCodes(formats strfmt.Registry) error {
	if swag.IsZero(m.TaxCodes) { // not required
		return nil
	}

	for i := 0; i < len(m.TaxCodes); i++ {
		if swag.IsZero(m.TaxCodes[i]) { // not required
			continue
		}

		if m.TaxCodes[i] != nil {
			if err := m.TaxCodes[i].Validate(formats); err != nil {
				if ve, ok := err.(*errors.Validation); ok {
					return ve.ValidateName("taxCodes" + "." + strconv.Itoa(i))
				} else if ce, ok := err.(*errors.CompositeError); ok {
					return ce.ValidateName("taxCodes" + "." + strconv.Itoa(i))
				}
				return err
			}
		}

	}

	return nil
}

// ContextValidate validate this ecms detail model based on the context it is used
func (m *EcmsDetailModel) ContextValidate(ctx context.Context, formats strfmt.Registry) error {
	var res []error

	if err := m.contextValidateTaxCodes(ctx, formats); err != nil {
		res = append(res, err)
	}

	if len(res) > 0 {
		return errors.CompositeValidationError(res...)
	}
	return nil
}

func (m *EcmsDetailModel) contextValidateTaxCodes(ctx context.Context, formats strfmt.Registry) error {

	for i := 0; i < len(m.TaxCodes); i++ {

		if m.TaxCodes[i] != nil {
			if err := m.TaxCodes[i].ContextValidate(ctx, formats); err != nil {
				if ve, ok := err.(*errors.Validation); ok {
					return ve.ValidateName("taxCodes" + "." + strconv.Itoa(i))
				} else if ce, ok := err.(*errors.CompositeError); ok {
					return ce.ValidateName("taxCodes" + "." + strconv.Itoa(i))
				}
				return err
			}
		}

	}

	return nil
}

// MarshalBinary interface implementation
func (m *EcmsDetailModel) MarshalBinary() ([]byte, error) {
	if m == nil {
		return nil, nil
	}
	return swag.WriteJSON(m)
}

// UnmarshalBinary interface implementation
func (m *EcmsDetailModel) UnmarshalBinary(b []byte) error {
	var res EcmsDetailModel
	if err := swag.ReadJSON(b, &res); err != nil {
		return err
	}
	*m = res
	return nil
}
