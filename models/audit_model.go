// Code generated by go-swagger; DO NOT EDIT.

package models

// This file was generated by the swagger tool.
// Editing this file might prove futile when you re-run the swagger generate command

import (
	"context"
	"strconv"

	"github.com/go-openapi/errors"
	"github.com/go-openapi/strfmt"
	"github.com/go-openapi/swag"
	"github.com/go-openapi/validate"
)

// AuditModel Provides detailed information about an API call.
//
// The information on this record was captured by AvaTax when your API call was made.  If you are unsure why you
// received an error, you can fetch these audit objects and examine the `RequestUrl`, `RequestBody`, and `ErrorMessage`
// fields to determine root cause for the error.
// Example: {"accountId":123,"adapterVersion":"1.0","clientName":"Swagger UI","clientVersion":"12.3.0","databaseCallCount":1,"databaseCallDuration":"00:00:00","errorMessage":"","ipAddress":"123.0.0.123","isQueued":false,"loadBalancerDuration":0,"machineName":"AV-T1234-56789","operation":"QueryCompanies","recordCount":32309,"referenceAuthorization":"","referenceCode":"/api/v2/companies","referenceId":0,"remoteCallDuration":"00:00:00","requestUrl":"/api/v2/companies","responseBody":"{\r\n  \"@recordsetCount\": 0,\r\n  \"value\": [],\r\n  \"@nextLink\": \"/api/v2/companies?%24top=10\u0026%24skip=10\"\r\n}","responseStatus":200,"serverDuration":12345,"serverName":"AV-T1234-56789","serverTimestamp":"2021-12-25T17:08:35.5816044Z","serverVersion":"12.3.0.0","serviceName":"AccountSvcJson","severityLevelId":0,"transactionId":123,"userId":123}
//
// swagger:model AuditModel
type AuditModel struct {

	// The unique ID number of the account to which the user belongs.
	AccountID int32 `json:"accountId,omitempty"`

	// If your API call specified a `AdapterName` in the [Client Profile Headers](https://developer.avalara.com/avatax/client-headers/), this
	// variable will contain its value.  This information is self-reported by the client and is not guaranteed to be present.
	AdapterName string `json:"adapterName,omitempty"`

	// If your API call specified a `AdapterVersion` in the [Client Profile Headers](https://developer.avalara.com/avatax/client-headers/), this
	// variable will contain its value.  This information is self-reported by the client and is not guaranteed to be present.
	AdapterVersion string `json:"adapterVersion,omitempty"`

	// Reserved for Avalara internal usage.
	AuditMessage string `json:"auditMessage,omitempty"`

	// If your API call specified a `ClientName` in the [Client Profile Headers](https://developer.avalara.com/avatax/client-headers/), this
	// variable will contain its value.  This information is self-reported by the client and is not guaranteed to be present.
	ClientName string `json:"clientName,omitempty"`

	// If your API call specified a `ClientVersion` in the [Client Profile Headers](https://developer.avalara.com/avatax/client-headers/), this
	// variable will contain its value.  This information is self-reported by the client and is not guaranteed to be present.
	ClientVersion string `json:"clientVersion,omitempty"`

	// If this API call included requests made to any of the AvaTax data layers, this contains the number of requests that were traced.
	//
	// Please note that not all data layers support this measurement.
	DatabaseCallCount int32 `json:"databaseCallCount,omitempty"`

	// If this API call included requests made to any of the AvaTax data layers, this contains the total duration time measured for all the requests.
	//
	// Please note that not all data layers support this measurement.
	DatabaseCallDuration string `json:"databaseCallDuration,omitempty"`

	// If this API call reported an error, this contains the name of the error that was returned.  You can look up more
	// information about AvaTax error messages on the [AvaTax REST Error Page](https://developer.avalara.com/avatax/errors/).
	ErrorMessage string `json:"errorMessage,omitempty"`

	// Reserved for Avalara internal usage.
	Events []*AuditEvent `json:"events"`

	// The origin IP address from which AvaTax received this API call.  If you use a proxy layer or other
	// gateway, this IP address may be the address of the gateway.  This information is not guaranteed
	// to be accurate and may change based on network conditions between your site and AvaTax.
	IPAddress string `json:"ipAddress,omitempty"`

	// Reserved for Avalara internal usage.
	IsQueued bool `json:"isQueued,omitempty"`

	// Reserved for Avalara internal usage.
	LoadBalancerDuration int32 `json:"loadBalancerDuration,omitempty"`

	// If your API call specified a `MachineName` in the [Client Profile Headers](https://developer.avalara.com/avatax/client-headers/), this
	// variable will contain its value.  This information is self-reported by the client and is not guaranteed to be present.
	MachineName string `json:"machineName,omitempty"`

	// The operation name of this API call.
	Operation string `json:"operation,omitempty"`

	// If this API call returned an array of information, this value contains the number of records returned.
	RecordCount int32 `json:"recordCount,omitempty"`

	// Reserved for Avalara internal usage.
	ReferenceAuthorization string `json:"referenceAuthorization,omitempty"`

	// A context-dependent reference code for this API call.  This reference code is not guaranteed to contain a specific value
	// and may be used differently by various API calls.
	ReferenceCode string `json:"referenceCode,omitempty"`

	// A context-dependent reference ID for this API call.  This reference ID is not guaranteed to contain a specific value
	// and may be used differently by various API calls.
	ReferenceID int64 `json:"referenceId,omitempty"`

	// If this API call included interoperation with other Avalara services, this contains the amount of time taken by those services.
	RemoteCallDuration string `json:"remoteCallDuration,omitempty"`

	// Reserved for Avalara internal usage.
	RemoteCalls []*AuditModel `json:"remoteCalls"`

	// If this request was an HTTP request that included a body such as a POST or a PUT, this will contain the request body sent by the client.
	//
	// This request body is represented as a string, exactly as it was received from the client.  Regardless of whether the request was JSON,
	// Base64 encoded bytes, or a CSV file, this contains the exact contents of the request body.
	RequestBody string `json:"requestBody,omitempty"`

	// The original request URL as provided by the client.
	RequestURL string `json:"requestUrl,omitempty"`

	// The entire response body sent from the AvaTax server to the client.  This value is returned as a string regardless of whether the results
	// were JSON-formatted text, CSV files, or raw strings.
	ResponseBody string `json:"responseBody,omitempty"`

	// The HTTP response code that was sent by the server.
	ResponseStatus int32 `json:"responseStatus,omitempty"`

	// The number of milliseconds that the AvaTax server took to respond to this API call.
	ServerDuration int32 `json:"serverDuration,omitempty"`

	// The server name of the AvaTax server that responded to this API call.
	ServerName string `json:"serverName,omitempty"`

	// The server timestamp, in UTC, of the time when the server received this API call.
	// Format: date-time
	ServerTimestamp strfmt.DateTime `json:"serverTimestamp,omitempty"`

	// The software version number of the currently deployed AvaTax API software on the server that responded to this API call.
	ServerVersion string `json:"serverVersion,omitempty"`

	// The service name of the AvaTax API service that responded to this API call.
	ServiceName string `json:"serviceName,omitempty"`

	// If the API contained a specific type of error code, this value would contain the unique ID number of the severity level
	// of the response returned to the client.
	SeverityLevelID int32 `json:"severityLevelId,omitempty"`

	// A unique ID number referring to this individual API call.
	TransactionID int64 `json:"transactionId,omitempty"`

	// The unique ID number of the user that performed this API call.
	UserID int32 `json:"userId,omitempty"`
}

// Validate validates this audit model
func (m *AuditModel) Validate(formats strfmt.Registry) error {
	var res []error

	if err := m.validateEvents(formats); err != nil {
		res = append(res, err)
	}

	if err := m.validateRemoteCalls(formats); err != nil {
		res = append(res, err)
	}

	if err := m.validateServerTimestamp(formats); err != nil {
		res = append(res, err)
	}

	if len(res) > 0 {
		return errors.CompositeValidationError(res...)
	}
	return nil
}

func (m *AuditModel) validateEvents(formats strfmt.Registry) error {
	if swag.IsZero(m.Events) { // not required
		return nil
	}

	for i := 0; i < len(m.Events); i++ {
		if swag.IsZero(m.Events[i]) { // not required
			continue
		}

		if m.Events[i] != nil {
			if err := m.Events[i].Validate(formats); err != nil {
				if ve, ok := err.(*errors.Validation); ok {
					return ve.ValidateName("events" + "." + strconv.Itoa(i))
				} else if ce, ok := err.(*errors.CompositeError); ok {
					return ce.ValidateName("events" + "." + strconv.Itoa(i))
				}
				return err
			}
		}

	}

	return nil
}

func (m *AuditModel) validateRemoteCalls(formats strfmt.Registry) error {
	if swag.IsZero(m.RemoteCalls) { // not required
		return nil
	}

	for i := 0; i < len(m.RemoteCalls); i++ {
		if swag.IsZero(m.RemoteCalls[i]) { // not required
			continue
		}

		if m.RemoteCalls[i] != nil {
			if err := m.RemoteCalls[i].Validate(formats); err != nil {
				if ve, ok := err.(*errors.Validation); ok {
					return ve.ValidateName("remoteCalls" + "." + strconv.Itoa(i))
				} else if ce, ok := err.(*errors.CompositeError); ok {
					return ce.ValidateName("remoteCalls" + "." + strconv.Itoa(i))
				}
				return err
			}
		}

	}

	return nil
}

func (m *AuditModel) validateServerTimestamp(formats strfmt.Registry) error {
	if swag.IsZero(m.ServerTimestamp) { // not required
		return nil
	}

	if err := validate.FormatOf("serverTimestamp", "body", "date-time", m.ServerTimestamp.String(), formats); err != nil {
		return err
	}

	return nil
}

// ContextValidate validate this audit model based on the context it is used
func (m *AuditModel) ContextValidate(ctx context.Context, formats strfmt.Registry) error {
	var res []error

	if err := m.contextValidateEvents(ctx, formats); err != nil {
		res = append(res, err)
	}

	if err := m.contextValidateRemoteCalls(ctx, formats); err != nil {
		res = append(res, err)
	}

	if len(res) > 0 {
		return errors.CompositeValidationError(res...)
	}
	return nil
}

func (m *AuditModel) contextValidateEvents(ctx context.Context, formats strfmt.Registry) error {

	for i := 0; i < len(m.Events); i++ {

		if m.Events[i] != nil {
			if err := m.Events[i].ContextValidate(ctx, formats); err != nil {
				if ve, ok := err.(*errors.Validation); ok {
					return ve.ValidateName("events" + "." + strconv.Itoa(i))
				} else if ce, ok := err.(*errors.CompositeError); ok {
					return ce.ValidateName("events" + "." + strconv.Itoa(i))
				}
				return err
			}
		}

	}

	return nil
}

func (m *AuditModel) contextValidateRemoteCalls(ctx context.Context, formats strfmt.Registry) error {

	for i := 0; i < len(m.RemoteCalls); i++ {

		if m.RemoteCalls[i] != nil {
			if err := m.RemoteCalls[i].ContextValidate(ctx, formats); err != nil {
				if ve, ok := err.(*errors.Validation); ok {
					return ve.ValidateName("remoteCalls" + "." + strconv.Itoa(i))
				} else if ce, ok := err.(*errors.CompositeError); ok {
					return ce.ValidateName("remoteCalls" + "." + strconv.Itoa(i))
				}
				return err
			}
		}

	}

	return nil
}

// MarshalBinary interface implementation
func (m *AuditModel) MarshalBinary() ([]byte, error) {
	if m == nil {
		return nil, nil
	}
	return swag.WriteJSON(m)
}

// UnmarshalBinary interface implementation
func (m *AuditModel) UnmarshalBinary(b []byte) error {
	var res AuditModel
	if err := swag.ReadJSON(b, &res); err != nil {
		return err
	}
	*m = res
	return nil
}
